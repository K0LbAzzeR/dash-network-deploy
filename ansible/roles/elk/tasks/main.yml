---

- name: create masternode elk services dir
  file:
    path: '{{ elk_path }}'
    state: directory
    recurse: true

- name: copy files
  template:
    src: '{{ item }}.j2'
    dest: '{{ elk_path }}/{{ item }}'
  loop:
    - docker-compose.yml
    - elasticsearch.yml
    - kibana.yml
    - logstash.yml
    - logstash.conf

- name: start elk services
  docker_compose:
    project_src: '{{ elk_path }}'
    state: present
    restarted: yes
    pull: yes
